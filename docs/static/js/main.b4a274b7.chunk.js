(this["webpackJsonpwebgl-vj-generative"]=this["webpackJsonpwebgl-vj-generative"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(1),a=n.n(r),o=n(23),s=n.n(o),c=(n(97),n(8)),u=n(9),l=n(12),h=n(11);n.p;n.p,n(98);for(var d=n(10),g=n(2),f=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).svgRef=a.a.createRef(),i.state={shaderLines:"",matchingCodeLines:[]},i.bitRate=4,i.geneSize=128,i.bits=g.b(i.bitRate*i.geneSize).map((function(e){return Math.random()>.5?1:0})),i.convertBits=i.convertBits.bind(Object(d.a)(i)),i}return Object(u.a)(n,[{key:"convertBits",value:function(){for(var e=this,t=[],n=function(n){var i=g.b(e.bitRate).map((function(t){return e.bits[n+t]}));t.push(parseInt(i.join(""),2))},i=0;i<this.geneSize*this.bitRate;i+=this.bitRate)n(i);return t}},{key:"componentDidMount",value:function(){var e=this;console.log("interface mounted");var t=g.c(this.svgRef.current).attr("viewBox","-5 -5 110 110").attr("width",.8*window.innerHeight),n=Math.floor(Math.sqrt(this.bits.length)),i=100/n,r=t.append("g"),a=g.a(),o=[];a.on("drag",(function(t){var a=Math.floor(t.x/i),s=Math.floor(t.y/i)*n+a;o[o.length-1]!==s&&(o.push(s),1===e.bits[s]?e.bits[s]=0:e.bits[s]=1,r.select("rect#_"+s).attr("fill",1===e.bits[s]?"white":"black"),e.props.fns.setDNA({data:e.convertBits()}),window.shaderInit(e.props.fns.generateFragmentShader()),e.setState({shaderLines:e.props.fns.generateFragmentShader()}))})),a.on("start",(function(e){o=[]})),r.call(a);var s=0,c=0;this.bits.forEach((function(t,a){c=Math.floor(a/n),s=a-c*n;var o=r.append("rect").attr("id","_"+a).attr("x",s*i).attr("y",c*i).attr("width",i).attr("height",i).attr("fill",1===t?"white":"black").attr("stroke-width","0.5px");o.on("mouseover",(function(){var t=Math.floor(a/e.bitRate);console.log("Gene index",t);var n=e.props.fns.getLineMetaData().map((function(e,t){return e.idx=t,e}));console.log(n);var i=n.filter((function(e){return t>=e.begin&&t<=e.end}));console.log(i),e.setState({matchingCodeLines:i.map((function(e){return e.idx}))})})),o.on("click",(function(){})),(s+=1)>n&&(c+=1,s=0)})),setTimeout((function(){e.props.fns.setDNA({data:e.convertBits()}),window.shaderInit(e.props.fns.generateFragmentShader()),e.setState({shaderLines:e.props.fns.generateFragmentShader()})}),10)}},{key:"render",value:function(){var e=this,t=this.props.fns.getLineMetaData(),n=this.state.shaderLines.split("\n").map((function(n,r){return Object(i.jsx)("div",{onClick:function(){var n=t[r-t.lineBegin];if(void 0!==n)if(n.end>n.begin){var i=g.c(e.svgRef.current);g.b((n.end-n.begin)*e.bitRate).forEach((function(t){console.log(t,n.begin,t+n.begin*e.bitRate);var r=t+n.begin*e.bitRate;e.bits[r]=Math.random()>.5?1:0,i.select("rect#_"+r).attr("fill",1===e.bits[r]?"white":"black")})),e.props.fns.setDNA({data:e.convertBits()}),window.shaderInit(e.props.fns.generateFragmentShader()),e.setState({shaderLines:e.props.fns.generateFragmentShader()})}else console.log("wrap around issue")},onMouseOver:function(){e.setState({matchingCodeLines:[r-t.lineBegin]}),g.c(e.svgRef.current).selectAll("rect").attr("stroke","none");var n=t[r-t.lineBegin];void 0!==n&&(n.end>n.begin?g.b((n.end-n.begin)*e.bitRate).forEach((function(t){console.log(t,n.begin,t+n.begin*e.bitRate);var i=t+n.begin*e.bitRate;g.c(e.svgRef.current).select("rect#_"+i).attr("stroke","orange")})):console.log("wrap around issue"))},style:{outline:-1!==e.state.matchingCodeLines.indexOf(r-t.lineBegin)?"1px solid white":null,cursor:"pointer"},children:n})}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{style:{position:"absolute",top:0,left:0,opacity:1,backgroundColor:"rgba(0,0,0,0)",width:"100%"},children:Object(i.jsx)("svg",{ref:this.svgRef})}),Object(i.jsx)("div",{style:{position:"absolute",top:0,right:0,opacity:1,backgroundColor:"rgba(0,0,0,0)",width:"50%"},children:Object(i.jsx)("div",{style:{padding:"10px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",backgroundColor:"rgba(255,255,255,0.6)"},children:n})})]})}}]),n}(a.a.Component),m=24,p=0,b=[],v=[],w=0;w<128;w++)b.push(Math.floor(12*Math.random()));var R=[{name:"",args:1},{name:"sin",args:1},{name:"cos",args:1},{name:"abs",args:1},{name:"fract",args:1}],S=[{name:"+="},{name:"-="},{name:"*="}],x=[{name:"*"},{name:"+"},{name:"-"},{name:"/"}],A=[{name:"red"},{name:"green"},{name:"blue"},{name:"timeMulti"}],T=[{name:"position.x"},{name:"position.y"},{name:"time"},{name:"time2"},{name:"time*timeMulti"},{name:"time/timeMulti"},{name:"distanceToCenter"},{name:"distanceToBottomLeft"},{name:"distanceToBottomRight"},{name:"distanceToTopLeft"},{name:"distanceToTopRight"},{name:"red"},{name:"green"},{name:"blue"}];function F(){var e={begin:p,end:-1},t=b[p];p++,p%=b.length;var n=b[p];p++,p%=b.length;var i=b[p];p++,p%=b.length;var r=b[p]%1+1;r%2===0&&(r+=1),p++,p%=b.length;for(var a=[],o=0;o<r;o++)a.push(b[p]),p++,e.end=p-1,p%=b.length;return v.push(e),[_(A,t).name,_(S,n).name,_(R,i).name+"(",j(a),");"].join(" ")}function j(e){for(var t=[];e.length>0;)e.length>=2?t.push([_(T,e.pop()).name,_(x,e.pop()).name].join(" ")):t.push(_(T,e.pop()).name);return t.join(" ")}function _(e,t){return e[t%e.length]}function y(){p=0,v=[];var e=[];e.push("uniform float time;"),e.push("uniform vec2 resolution;"),e.push("void main ( void ) {"),e.push("vec2 position = - 1.0 + 2.0 * gl_FragCoord.xy / resolution.xy;"),e.push("vec2 centerPosition = vec2(resolution.x*0.5, resolution.y*0.5);"),e.push("float distanceToCenter = (1.0/resolution.x) * 3.14 * distance(gl_FragCoord.xy, centerPosition);"),e.push("float distanceToTopLeft = (1.0/resolution.x) * distance(gl_FragCoord.xy, vec2(0,0));"),e.push("float distanceToTopRight = (1.0/resolution.x) * distance(gl_FragCoord.xy, vec2(resolution.x,0));"),e.push("float distanceToBottomLeft = (1.0/resolution.x) * distance(gl_FragCoord.xy, vec2(0,resolution.y));"),e.push("float distanceToBottomRight = (1.0/resolution.x) * distance(gl_FragCoord.xy, resolution.xy);"),e.push("float timeMulti = 0.0;"),e.push("float time2 = time * 0.1;"),e.push("float red = 0.0;"),e.push("float green = 0.0;"),e.push("float blue = 0.0;"),v.lineBegin=e.length;for(var t=0;t<m;t++)e.push(F());e.push("gl_FragColor = vec4( red, green, blue, 1.0 );"),e.push("}");var n=[];return e.forEach((function(e,t){n.push([t,e].join("\t"))})),e.join("\n")}function E(e){b=[],p=0,e.data.forEach((function(e){b.push(e)}))}function L(){return v}var B=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=0;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)};var t,n,i,r,a,o,s,c,u={start_time:(new Date).getTime(),time:0,screenWidth:0,screenHeight:0};function l(e){"\n\nattribute vec3 position;\nvoid main() {\n  gl_Position = vec4( position, 1.0 );\n}\n",r=e,t=document.querySelector("canvas");try{n=t.getContext("experimental-webgl")}catch(o){}if(!n)throw"cannot create webgl context";i=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),a=function(e,t){var i=n.createProgram(),r=h(e,n.VERTEX_SHADER),a=h("#ifdef GL_ES\nprecision highp float;\n#endif\n\n"+t,n.FRAGMENT_SHADER);if(null==r||null==a)return console.log(r,a),null;if(n.attachShader(i,r),n.attachShader(i,a),n.deleteShader(r),n.deleteShader(a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))return alert("ERROR:\nVALIDATE_STATUS: "+n.getProgramParameter(i,n.VALIDATE_STATUS)+"\nERROR: "+n.getError()+"\n\n- Vertex Shader -\n"+e+"\n\n- Fragment Shader -\n"+t),null;return i}("\n\nattribute vec3 position;\nvoid main() {\n  gl_Position = vec4( position, 1.0 );\n}\n",r),u.start_time=(new Date).getTime(),s=n.getUniformLocation(a,"time"),c=n.getUniformLocation(a,"resolution")}function h(e,t){var i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)?i:(alert((t==n.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+n.getShaderInfoLog(i)),null)}l("\n\nuniform float time;\nuniform float time2;\nuniform vec2 resolution; \nvoid main( void ) { \n  gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n} \n"),function r(){void(t.width==t.clientWidth&&t.height==t.clientHeight||(t.width=t.clientWidth,t.height=t.clientHeight,u.screenWidth=t.width,u.screenHeight=t.height,n.viewport(0,0,t.width,t.height))),function(){if(!a)return;u.time=(new Date).getTime()-u.start_time,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.useProgram(a),n.uniform1f(s,u.time/1e3),n.uniform2f(c,u.screenWidth,u.screenHeight),n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(o,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(o),n.drawArrays(n.TRIANGLES,0,6),n.disableVertexAttribArray(o)}(),(e+=1)>3e9&&(e=0,E({data:g.b(128).map((function(e){return Math.floor(12*Math.random())}))}),l(y()),u.start_time=(new Date).getTime());requestAnimationFrame(r)}(),window.shaderInit=l}},{key:"render",value:function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("canvas",{}),Object(i.jsx)(f,{fns:{generateFragmentShader:y,setDNA:E,shaderInit:undefined,getLineMetaData:L}})]})}}]),n}(a.a.Component),O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(B,{})}),document.getElementById("root")),O()},97:function(e,t,n){},98:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.b4a274b7.chunk.js.map